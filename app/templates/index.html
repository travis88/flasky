{% extends "base.html" %}
{% import "_macros.html" as macros %}

{% block title %}Index{% endblock %}

{% block content %}
    <div class="page-header">
        <h1>Hello, 
            {% if current_user.is_authenticated %}
                {{ current_user.name }}
            {% else %}
                Stranger
            {% endif %}!
        </h1>
    </div>
    <div>
        {% if current_user.can(Permission.WRITE_ARTICLES) %}
            <form method="POST">
                {{ form.csrf_token }}
                <div class="form-group">
                    {{ form.body.label }}
                    {{ form.body(class='form-control') }}
                </div>
                {% for field in form.errors %}
                    {% for error in form.errors[field] %}
                        <div class="error">{{ error }}</div>
                    {% endfor %}
                {% endfor %}
                {{ form.submit(class='btn btn-default') }}
            </form>
        {% endif %}
    </div>
    {% include '_posts.html' %}
    {% if pagination %}
        <div class="pagination">
            {{ macros.pagination_widget(pagination, '.index') }}
        </div>
    {% endif %}
{% endblock %}
{% block scripts %}
    {{ super() }}
    {{ pagedown.include_pagedown() }}
{% endblock %}